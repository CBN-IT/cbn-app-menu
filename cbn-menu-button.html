<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../cbn-app-menu/cbn-app-menu.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<!--
`cbn-menu-button` 

    <cbn-menu-button></cbn-menu-button>

### Validation

### Styling

@demo demo/index.html
@class cbn-menu-button
-->

<style is="custom-style">
	/*it doesn't work with :host(.submenu)*/
	cbn-menu-button.submenu {
		--cbn-menu-button-item-list-icon: {
			margin-left: 10px;
		}
	}
</style>
<dom-module id="cbn-menu-button">
	<template>
		<style is="custom-style">
			:host {
				display: block;
			}
			#generalMenu{
				padding-top: 0;
				padding-bottom: 0;
			}
			#generalMenu .item-menu:hover{
				background-color: #ecf1fd;
				color: #3277ec;
				border-left: 3px solid #80a3ed;
			}
			#generalMenu .item-menu{
				border-left: 3px solid white;
			}
			.item-menu{
				padding: 0 8px;
				cursor: pointer;
			}
			.item-add {
				width:22px;
			}
			.icon-submenu{
				padding-left: 20px;
			}
			.title-menu{
				margin-left: 11px;
			}
			.item-min-height{
				min-height: 35px;
			}
			#generalMenu paper-item.selected-item-menu{
				color:#4285F4;
				background-color: #ecf1fd;
				border-left: 3px solid #80a3ed;
			}
			.item-list iron-icon {
				@apply(--cbn-menu-button-item-list-icon)
			}
		</style>
		<cbn-app-menu class="menu-content sublist" id="generalMenu" attr-for-selected="data-route" selected="{{route}}" selected-class="selected-item-menu">
			<paper-item class="item-menu item-min-height flex item-list" data-route$="{{listRoute}}" on-tap="_pageShow">
				<iron-icon icon="{{icon}}" class="icon-menu"></iron-icon>
				<span class="title-menu flex" style="width:0px;overflow: hidden"><content></content></span>
			</paper-item>
			<template is="dom-if" if="{{_hasAddRoute(addRoute)}}">
				<paper-item class="item-menu item-min-height item-add" data-route$="{{addRoute}}" on-tap="_pageShow">
					<iron-icon icon="add" class="icon-menu"></iron-icon>
				</paper-item>
			</template>
		</cbn-app-menu>
	</template>
</dom-module>

<script>
	(function () {
		Polymer({
			is: 'cbn-menu-button',
			behaviors: [],
			properties: {
				/**
				 * the icon to be used with the button
				 */
				icon: {
					type: String,
					value: "",
					notify: false,
					readOnly: false,
					reflectToAttribute: false
				},

				/**
				 * the route to be used for main action
				 */
				listRoute: {
					type: String,
					value: "",
					notify: false,
					readOnly: false,
					reflectToAttribute: false
				},
				/**
				 * the route to be used for main action
				 */
				addRoute: {
					type: String,
					value: "",
					notify: false,
					readOnly: false,
					reflectToAttribute: false
				},

				/**
				 * the route to be used for main action
				 */
				noPageShow: {
					type: Boolean,
					value: false,
					notify: false,
					readOnly: false,
					reflectToAttribute: false
				},

				/**
				 * To propagate the route to the buttons
				 */
				route: {
					type: String,
					value: "",
					notify: true,
					readOnly: false,
					reflectToAttribute: false
				}
				

			},
			observers: [],
			ready: function () {
			},
			_hasAddRoute: function () {
				if (this.addRoute === null ||
					this.addRoute === undefined ||
					this.addRoute === "") {

					return false;
				}
				return true;
			},
			_pageShow: function(event){
				if(window.page && window.page.show && !this.noPageShow) {
					window.page.show(event.currentTarget.getAttribute("data-route"));
				}
			}
		})
	})();
</script>
